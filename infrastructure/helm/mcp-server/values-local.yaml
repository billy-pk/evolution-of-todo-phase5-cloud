# values-local.yaml
# Overrides for local Minikube deployment
# Usage: helm install mcp-server ./mcp-server -f values-local.yaml

replicaCount: 1

# Image configuration for local development
image:
  repository: mcp-server
  pullPolicy: Never  # Use local Docker images
  tag: "latest"

# Service configuration - ClusterIP (internal only, not exposed)
service:
  type: ClusterIP
  port: 8001
  targetPort: 8001

# Dapr sidecar configuration (enabled for event publishing)
dapr:
  enabled: true
  appId: mcp-server
  appPort: 8001
  appProtocol: http
  enableMetrics: true
  metricsPort: 9090
  logLevel: debug  # Verbose logging for local debugging

# Environment variables
env:
  # Allowed Hosts for MCP Server
  ALLOWED_HOSTS: "mcp-server,mcp-server.default.svc.cluster.local,localhost"

  # Logging
  LOG_LEVEL: "debug"

# Resource limits for local development (reduced for Minikube)
resources:
  limits:
    cpu: 250m
    memory: 256Mi
  requests:
    cpu: 50m
    memory: 64Mi

# Liveness and readiness probes
livenessProbe:
  tcpSocket:
    port: 8001
  initialDelaySeconds: 15
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  tcpSocket:
    port: 8001
  initialDelaySeconds: 10
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3
